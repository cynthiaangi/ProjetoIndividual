<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/reset.css">
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="icon" href="./img/logo.png">
    <title>Voz do Amor</title>
</head>
<body>
    <header class="cabecalho">
        <div class="cabecalho-titulo">
            <img class="cabecalho-titulo-img" src="./img/logo.png" alt="Logo site">
            <h1>
                Voz do amor
            </h1>
        </div>
        <nav class="cabecalho-navegacao">
            <a href="./index.html"> Home</a>
            <a href="">Sobre Mim</a>
            <a href="./login.html">Grupo de Apoio</a>
        </nav>
    </header>
    <main class="login">
        <img src="./img/simbolo.png" alt="Símbolo da conscientização da perda gestacional">
        <section id="card-login">
            <div class="campo">
                e-mail: <input type="text" placeholder="Digite seu e-mail">
            </div>
            <div class="campo">
                senha: <input type="text" placeholder="Insira a sua senha">
            </div>

            <button class="botoes" onclick="entrar()">Entrar</button>
            <button class="botoes" onclick="alterarMain()">Novo Usuário</button>
        </section>
        <section id="card-cadastro">
            <div class="campo">   
                Nome: <input id="ipt_nome" type="text">
            </div>
            <div class="campo">    
                Data de Nascimento: <input id="ipt_nasc" type="text">
            </div>
            <div class="campo">    
                Gênero: 
               <select name="genero" id="sel_gen">
                    <option value="#">Escolha uma opção</option>
                    <option value="feminino">Feminino</option>
                    <option value="masculino">Masculino</option>
               </select>
            </div>
            <div class="campo">    
                E-mail: <input id="ipt_email" type="text">
            </div>
            <div class="campo">    
                Telefone: <input id="ipt_tel" type="text">
            </div>
            <div class="campo">      
                Senha: <input id="ipt_senha" type="password">
            </div>
            <div class="campo">     
                Confirmação de senha: <input id="ipt_conf" type="password">
            </div>

                <button class="botoes" onclick="cadastrar()">Cadastrar</button>
                <button class="botoes" onclick="voltar()">Voltar</button>

        </section>
    </main>
    <footer class="rodape">
        <h4>
            Desenvolvido por Cynthia Angi
        </h4>
    </footer>
</body>
</html>

<script>
    function alterarMain(){
        var login = document.getElementById('card-login');
        var cadastro = document.getElementById('card-cadastro');

        login.style.display = 'none';
        cadastro.style.display = 'flex';
    }

    function voltar(){
        var login = document.getElementById('card-login');
        var cadastro = document.getElementById('card-cadastro');

        login.style.display = 'flex';
        cadastro.style.display = 'none';
    }

    function cadastrar(){
        var nome = ipt_nome.value;
        var dtNasc = ipt_nasc.value;
        var gen = sel_gen.value;
        var email = ipt_email.value;
        var senha = ipt_senha.value;
        var conf = ipt_conf.value;
        var tel = ipt_tel.value;
        var arroba = '';
        var pontoCom = email.indexOf('.com');
        var arroba = email.indexOf('@');
        var senhaOk = 0;
        var senhaMaiusc = senha.toUpperCase();
        var senhaMinusc = senha.toLowerCase();
        var especial = '!@#$%&*';
        var numero = '1234567890';

        if (nome == '' || dtNasc == '' || gen == '#' || email == '' || senha == '' || conf == ''){
            alert('Todos os campos devem ser preenchidos');
        } else{
            for(var i = 0; i < dtNasc.length; i++){
                if(i == 2 || i == 5){
                    if(dtNasc[i] != '/'){
                        dtNasc = false;
                        break;
                    }
                }
            } 
            if(dtNasc.length != 10 || dtNasc == false){
                alert('Formato de data inválido');
            } else{
                for(var j = 0; j < tel.length; j++){
                    if(j == 0){
                        if(tel[j] != '('){
                            tel = false;
                            break;
                        }
                    }
                    if(j == 3){
                        if(tel[j] != ')'){
                            tel = false;
                            break;
                        }
                    }
                    if(j == 9){
                        if(tel[j] != '-'){
                            tel = false;
                            break;
                        }
                    }
                }
                if(tel.length != 14 || tel == false){
                    alert('Número de telefone formato inválido');
                }else if (nome.length < 3){
                alert('O nome precisa conter pelo menos 3 letras');
                } else if(gen != 'feminino'){
                    alert('Infelizmente você não pode se cadastrar em nosso grupo de apoio!');
                } else if(pontoCom < arroba || arroba == -1 || pontoCom == -1){
                    alert('Formato de email inválido');
                }  else  {
                    for(var k = 0; k < senha.length; k++){
                        if(Number(senha[k]) != NaN){
                            senhaOk++;
                            break;
                        }
                    }
                    for(var x = 0; x < senha.length; x++){
                        if(especial.includes(senha[x])){
                            senhaOk++;
                            break;
                        }
                    }
                    if(senhaOk != 2 || senha == senhaMaiusc || senha == senhaMinusc || senha.length < 8){
                        alert('A senha precisa conter pelo menos: \n 1 número \n 1 caractere especial (! @ # $ % & *) \n 1 letra maiúscula \n 1 letra minúscula \n 8 caracteres')
                    } else if(conf != senha){
                        alert('A confirmação da senha está diferente da senha informada');
                    }else{
                        alert('Cadastro realizado com sucesso, retornando para a tela de login');
                        voltar();
                    }
                }
            }
        }
    }
        
</script>